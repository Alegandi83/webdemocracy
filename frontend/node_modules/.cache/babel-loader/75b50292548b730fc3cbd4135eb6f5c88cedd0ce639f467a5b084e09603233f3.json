{"ast":null,"code":"var _jsxFileName = \"/Users/alessandro.gandini/code/survey-app/frontend/src/pages/SurveyDetail.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { ArrowLeft, Vote, BarChart2, CheckCircle2, Calendar, MessageSquare, PlusCircle, ThumbsUp } from 'lucide-react';\nimport { QuestionType } from '../types';\nimport { surveyApi } from '../services/api';\nimport RatingInput from '../components/RatingInput';\nimport LikeRating from '../components/LikeRating';\nimport SidebarLayout from '../components/SidebarLayout';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SurveyDetail = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const [survey, setSurvey] = useState(null);\n\n  // Stati per diversi tipi di voto\n  const [selectedOptions, setSelectedOptions] = useState([]);\n  const [ratingValue, setRatingValue] = useState(null);\n  const [numericValue, setNumericValue] = useState('');\n  const [dateValue, setDateValue] = useState('');\n  const [textValue, setTextValue] = useState('');\n  const [customOptionText, setCustomOptionText] = useState('');\n  const [showCustomOption, setShowCustomOption] = useState(false);\n  const [comment, setComment] = useState('');\n\n  // Stati per voti multipli per opzione (nuova funzionalità)\n  const [optionVotes, setOptionVotes] = useState(new Map());\n  const [optionResponses, setOptionResponses] = useState(new Map());\n\n  // Stati per votare l'opzione personalizzata contestualmente\n  const [customOptionVote, setCustomOptionVote] = useState(null);\n  const [customOptionResponse, setCustomOptionResponse] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [voting, setVoting] = useState(false);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(null);\n\n  // Stati per il gradimento\n  const [userLike, setUserLike] = useState(null);\n  const [likeRating, setLikeRating] = useState(0);\n  const [likeSuccess, setLikeSuccess] = useState(null);\n  useEffect(() => {\n    if (id) {\n      loadSurvey(parseInt(id));\n    }\n  }, [id]);\n  const loadSurvey = async surveyId => {\n    try {\n      setLoading(true);\n      const surveyData = await surveyApi.getSurvey(surveyId);\n      setSurvey(surveyData);\n\n      // Carica il gradimento e il commento dell'utente se esistono\n      const existingLike = await surveyApi.getUserLike(surveyId);\n      if (existingLike) {\n        setUserLike(existingLike);\n        setLikeRating(existingLike.rating);\n        if (existingLike.comment) {\n          setComment(existingLike.comment);\n        }\n      }\n      setError(null);\n    } catch (err) {\n      setError('Errore nel caricamento del sondaggio');\n      console.error('Errore:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const toggleOption = optionId => {\n    if (!survey) return;\n    if (survey.question_type === QuestionType.SINGLE_CHOICE || survey.question_type === QuestionType.DATE) {\n      setSelectedOptions([optionId]);\n      // Quando si seleziona una data dalle opzioni, cancella la data personalizzata\n      if (survey.question_type === QuestionType.DATE) {\n        setDateValue('');\n      }\n    } else if (survey.question_type === QuestionType.MULTIPLE_CHOICE) {\n      if (selectedOptions.includes(optionId)) {\n        setSelectedOptions(selectedOptions.filter(id => id !== optionId));\n      } else {\n        setSelectedOptions([...selectedOptions, optionId]);\n      }\n    }\n  };\n  const handleVote = async () => {\n    if (!survey) return;\n    try {\n      setVoting(true);\n      setError(null);\n      const voteData = {};\n\n      // Costruisci il voto in base al tipo\n      if (survey.question_type === QuestionType.SINGLE_CHOICE || survey.question_type === QuestionType.MULTIPLE_CHOICE) {\n        // Aggiungi custom option se presente\n        if (customOptionText.trim()) {\n          voteData.custom_option_text = customOptionText.trim();\n        }\n\n        // Aggiungi opzioni selezionate se presenti\n        if (selectedOptions.length > 0) {\n          voteData.option_ids = selectedOptions;\n        }\n\n        // Verifica che almeno una delle due sia presente\n        if (!voteData.custom_option_text && (!voteData.option_ids || voteData.option_ids.length === 0)) {\n          setError('Seleziona almeno un\\'opzione o inserisci una nuova');\n          setVoting(false);\n          return;\n        }\n      } else if (survey.question_type === QuestionType.RATING || survey.question_type === QuestionType.SCALE) {\n        // Controlla se ci sono opzioni\n        if (survey.options && survey.options.length > 0) {\n          // Nuova modalità: voto per ogni opzione\n          const votes = [];\n          for (const option of survey.options) {\n            const value = optionVotes.get(option.id);\n            if (value !== undefined) {\n              votes.push({\n                option_id: option.id,\n                numeric_value: value\n              });\n            }\n          }\n\n          // Aggiungi custom option se presente con il suo voto\n          if (customOptionText.trim()) {\n            if (!customOptionVote) {\n              setError('Devi valutare la nuova opzione proposta');\n              setVoting(false);\n              return;\n            }\n            voteData.custom_option_text = customOptionText.trim();\n            // Aggiungi il voto per l'opzione personalizzata come valore numerico generico\n            voteData.numeric_value = customOptionVote;\n          }\n          if (votes.length === 0 && !voteData.custom_option_text) {\n            setError('Inserisci almeno una valutazione o aggiungi una nuova opzione');\n            setVoting(false);\n            return;\n          }\n          if (votes.length > 0) {\n            voteData.option_votes = votes;\n          }\n        } else {\n          // Backward compatibility: voto singolo\n          if (survey.question_type === QuestionType.RATING) {\n            if (!ratingValue) {\n              setError('Seleziona una valutazione');\n              setVoting(false);\n              return;\n            }\n            voteData.numeric_value = ratingValue;\n          } else {\n            if (!numericValue) {\n              setError('Inserisci un valore numerico');\n              setVoting(false);\n              return;\n            }\n            voteData.numeric_value = parseFloat(numericValue);\n          }\n        }\n      } else if (survey.question_type === QuestionType.DATE) {\n        // Controlla se ci sono opzioni\n        if (survey.options && survey.options.length > 0) {\n          // Nuova modalità: selezione tra date proposte o data personalizzata\n          if (dateValue.trim()) {\n            // Data personalizzata\n            voteData.date_value = dateValue;\n          } else if (selectedOptions.length > 0) {\n            // Data selezionata dalle opzioni\n            voteData.option_ids = selectedOptions;\n          } else {\n            setError('Seleziona una data disponibile o proponi una nuova data');\n            setVoting(false);\n            return;\n          }\n        } else {\n          // Backward compatibility: selezione libera\n          if (!dateValue) {\n            setError('Seleziona una data');\n            setVoting(false);\n            return;\n          }\n          voteData.date_value = dateValue;\n        }\n      } else if (survey.question_type === QuestionType.OPEN_TEXT) {\n        // Controlla se ci sono opzioni\n        if (survey.options && survey.options.length > 0) {\n          // Nuova modalità: risposta per ogni opzione\n          const responses = [];\n          for (const option of survey.options) {\n            const response = optionResponses.get(option.id);\n            if (response && response.trim()) {\n              responses.push({\n                option_id: option.id,\n                response_text: response.trim()\n              });\n            }\n          }\n\n          // Aggiungi custom option se presente con la sua risposta\n          if (customOptionText.trim()) {\n            if (!customOptionResponse.trim()) {\n              setError('Devi inserire una risposta per il nuovo campo proposto');\n              setVoting(false);\n              return;\n            }\n            voteData.custom_option_text = customOptionText.trim();\n            // Aggiungi la risposta per l'opzione personalizzata come commento generico\n            voteData.comment = customOptionResponse.trim();\n          }\n          if (responses.length === 0 && !voteData.custom_option_text) {\n            setError('Inserisci almeno una risposta o aggiungi un nuovo campo');\n            setVoting(false);\n            return;\n          }\n          if (responses.length > 0) {\n            voteData.option_responses = responses;\n          }\n        } else {\n          // Backward compatibility: risposta singola\n          if (!textValue.trim()) {\n            setError('Inserisci una risposta');\n            setVoting(false);\n            return;\n          }\n          voteData.comment = textValue.trim();\n        }\n      }\n\n      // Aggiungi gradimento e commento sul sondaggio se presenti\n      if (likeRating > 0) {\n        voteData.like_rating = likeRating;\n      }\n      if (comment && comment.trim()) {\n        voteData.survey_comment = comment.trim();\n      }\n      await surveyApi.voteSurvey(survey.id, voteData);\n      setSuccess('Voto registrato con successo!');\n      setTimeout(() => {\n        navigate(`/survey/${survey.id}/results`);\n      }, 2000);\n    } catch (err) {\n      var _err$response;\n      if (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 400) {\n        setError(err.response.data.detail || 'Errore nella registrazione del voto');\n      } else {\n        setError('Errore nella registrazione del voto');\n      }\n      console.error('Errore:', err);\n    } finally {\n      setVoting(false);\n    }\n  };\n  const handleLikeChange = rating => {\n    // Aggiorna solo lo stato locale, il gradimento verrà salvato insieme al voto\n    setLikeRating(rating);\n    setLikeSuccess(null);\n  };\n\n  // Aggiorna solo lo stato locale del commento\n  const handleCommentChange = newComment => {\n    setComment(newComment);\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading\",\n      children: \"Caricamento sondaggio...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 12\n    }, this);\n  }\n  if (error && !survey) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error\",\n      children: [error, /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate('/surveys'),\n        className: \"btn btn-primary\",\n        style: {\n          marginLeft: '1rem'\n        },\n        children: \"Torna alla Lista\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 7\n    }, this);\n  }\n  if (!survey) {\n    return null;\n  }\n\n  // Pannello laterale con gradimento\n  const sidebar = /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        gap: '0.5rem',\n        marginBottom: '1.5rem',\n        paddingBottom: '1rem',\n        borderBottom: '2px solid #e2e8f0'\n      },\n      children: [/*#__PURE__*/_jsxDEV(ThumbsUp, {\n        size: 20,\n        style: {\n          color: '#10b981'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          margin: 0,\n          fontSize: '1.125rem',\n          fontWeight: '600',\n          color: '#0f172a',\n          flex: 1\n        },\n        children: \"Gradimento\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: '#f8fafc',\n        borderRadius: '8px',\n        padding: '1.5rem',\n        border: '1px solid #e2e8f0'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          fontSize: '0.875rem',\n          color: '#64748b',\n          marginBottom: '1rem',\n          lineHeight: 1.6\n        },\n        children: \"Quanto ti \\xE8 piaciuto questo sondaggio?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'center',\n          padding: '1rem 0'\n        },\n        children: /*#__PURE__*/_jsxDEV(LikeRating, {\n          value: likeRating,\n          onChange: handleLikeChange,\n          size: 28\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 9\n      }, this), likeRating > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          marginTop: '1rem',\n          fontSize: '0.8125rem',\n          color: '#10b981',\n          textAlign: 'center',\n          fontWeight: '500'\n        },\n        children: [\"\\u2713 Hai selezionato \", likeRating, \" pallini verdi\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '1.5rem',\n        paddingTop: '1.5rem',\n        borderTop: '2px solid #e2e8f0'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: '0.5rem',\n          marginBottom: '1rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(MessageSquare, {\n          size: 20,\n          style: {\n            color: '#6366f1'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            margin: 0,\n            fontSize: '1.125rem',\n            fontWeight: '600',\n            color: '#0f172a'\n          },\n          children: \"Commento\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 376,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: '#f8fafc',\n          borderRadius: '8px',\n          padding: '1.5rem',\n          border: '1px solid #e2e8f0'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            display: 'block',\n            fontSize: '0.875rem',\n            fontWeight: '500',\n            color: '#64748b',\n            marginBottom: '0.75rem'\n          },\n          children: [\"Aggiungi un commento al sondaggio \", survey.require_comment && /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              color: '#6366f1'\n            },\n            children: \"(suggerito)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 74\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: comment,\n          onChange: e => handleCommentChange(e.target.value),\n          className: \"form-textarea\",\n          placeholder: \"Condividi la tua opinione su questo sondaggio...\",\n          rows: 4,\n          style: {\n            width: '100%',\n            padding: '0.75rem',\n            fontSize: '0.875rem',\n            border: '1px solid #cbd5e1',\n            borderRadius: '6px',\n            resize: 'vertical',\n            fontFamily: 'inherit'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            marginTop: '0.75rem',\n            fontSize: '0.75rem',\n            color: '#64748b',\n            fontStyle: 'italic'\n          },\n          children: \"\\uD83D\\uDCA1 Gradimento e commento verranno registrati insieme alla conferma del voto\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 424,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '1.5rem',\n        padding: '1rem',\n        background: '#fef3c7',\n        borderRadius: '8px',\n        border: '1px solid #fbbf24'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          fontSize: '0.8125rem',\n          color: '#92400e',\n          margin: 0,\n          lineHeight: 1.5\n        },\n        children: \"\\uD83D\\uDCA1 Il tuo gradimento aiuta a migliorare i sondaggi futuri!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 442,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 435,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 309,\n    columnNumber: 5\n  }, this);\n  const mainContent = /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '2rem'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate('/surveys'),\n        className: \"btn btn-secondary\",\n        children: [/*#__PURE__*/_jsxDEV(ArrowLeft, {\n          size: 18\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 458,\n          columnNumber: 11\n        }, this), \"Torna alla Lista\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 457,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 456,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 463,\n      columnNumber: 17\n    }, this), success && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"success\",\n      children: success\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 464,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '2rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"card-title\",\n          children: survey.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 11\n        }, this), survey.description && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '0.5rem',\n            alignItems: 'flex-start',\n            marginTop: '0.75rem',\n            padding: '0.875rem',\n            background: '#f8fafc',\n            borderRadius: '8px',\n            border: '1px solid #e2e8f0'\n          },\n          children: [/*#__PURE__*/_jsxDEV(MessageSquare, {\n            size: 16,\n            style: {\n              color: '#6366f1',\n              flexShrink: 0,\n              marginTop: '0.125rem'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 481,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              color: '#475569',\n              margin: 0,\n              lineHeight: 1.5,\n              fontSize: '0.9375rem',\n              fontWeight: '400'\n            },\n            children: survey.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 486,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 471,\n          columnNumber: 13\n        }, this), survey.tags && survey.tags.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '0.5rem',\n            flexWrap: 'wrap',\n            marginTop: '0.75rem'\n          },\n          children: survey.tags.map(tag => /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              padding: '0.25rem 0.75rem',\n              borderRadius: '6px',\n              background: tag.color,\n              color: 'white',\n              fontSize: '0.75rem',\n              fontWeight: '500'\n            },\n            children: tag.name\n          }, tag.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 506,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 499,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: '0.375rem',\n            marginTop: '0.75rem',\n            color: '#94a3b8',\n            fontSize: '0.8125rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Calendar, {\n            size: 14\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 531,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"Creato il: \", new Date(survey.created_at).toLocaleDateString('it-IT', {\n              year: 'numeric',\n              month: 'long',\n              day: 'numeric'\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 532,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 523,\n          columnNumber: 11\n        }, this), survey.expires_at && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '0.5rem',\n            padding: '0.5rem 0.75rem',\n            background: '#fef3c7',\n            border: '1px solid #fbbf24',\n            borderRadius: '6px',\n            color: '#92400e',\n            fontSize: '0.8125rem',\n            fontWeight: '500'\n          },\n          children: [\"\\u23F0 Scadenza: \", new Date(survey.expires_at).toLocaleDateString('it-IT', {\n            year: 'numeric',\n            month: 'long',\n            day: 'numeric',\n            hour: '2-digit',\n            minute: '2-digit'\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 542,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 467,\n        columnNumber: 9\n      }, this), (survey.question_type === QuestionType.SINGLE_CHOICE || survey.question_type === QuestionType.MULTIPLE_CHOICE) && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            marginBottom: '1rem',\n            fontSize: '1.125rem',\n            fontWeight: '600',\n            color: '#0f172a',\n            display: 'flex',\n            alignItems: 'center',\n            gap: '0.375rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Vote, {\n            size: 18,\n            style: {\n              color: '#6366f1'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 576,\n            columnNumber: 15\n          }, this), survey.question_type === QuestionType.MULTIPLE_CHOICE ? 'Seleziona una o più risposte:' : 'Seleziona la tua risposta:']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 567,\n          columnNumber: 13\n        }, this), survey.options.map((option, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `option-item ${selectedOptions.includes(option.id) ? 'selected' : ''}`,\n          onClick: () => toggleOption(option.id),\n          style: {\n            animationDelay: `${index * 0.1}s`\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: survey.question_type === QuestionType.MULTIPLE_CHOICE ? 'checkbox' : 'radio',\n            className: \"option-radio\",\n            name: \"survey-option\",\n            value: option.id,\n            checked: selectedOptions.includes(option.id),\n            onChange: () => toggleOption(option.id)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 591,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"option-text\",\n            children: option.option_text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 599,\n            columnNumber: 17\n          }, this), selectedOptions.includes(option.id) && /*#__PURE__*/_jsxDEV(CheckCircle2, {\n            size: 20,\n            style: {\n              color: '#6366f1',\n              marginLeft: 'auto'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 601,\n            columnNumber: 19\n          }, this)]\n        }, option.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 583,\n          columnNumber: 15\n        }, this)), survey.allow_custom_options && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '1rem'\n          },\n          children: !showCustomOption ? /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: () => setShowCustomOption(true),\n            className: \"btn btn-secondary\",\n            style: {\n              width: '100%'\n            },\n            children: [/*#__PURE__*/_jsxDEV(PlusCircle, {\n              size: 18\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 622,\n              columnNumber: 21\n            }, this), \"Aggiungi una Nuova Opzione\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 616,\n            columnNumber: 19\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              padding: '1rem',\n              background: '#f8fafc',\n              borderRadius: '8px',\n              border: '2px dashed #6366f1'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: 'block',\n                fontSize: '0.875rem',\n                fontWeight: '500',\n                color: '#475569',\n                marginBottom: '0.5rem'\n              },\n              children: \"La tua opzione personalizzata:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 632,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: customOptionText,\n              onChange: e => setCustomOptionText(e.target.value),\n              placeholder: \"Inserisci la tua opzione...\",\n              className: \"form-input\",\n              style: {\n                margin: 0,\n                marginBottom: '0.5rem'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 641,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => {\n                setShowCustomOption(false);\n                setCustomOptionText('');\n              },\n              style: {\n                fontSize: '0.8125rem',\n                color: '#64748b',\n                background: 'none',\n                border: 'none',\n                cursor: 'pointer',\n                textDecoration: 'underline'\n              },\n              children: \"Annulla\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 649,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 626,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 614,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 566,\n        columnNumber: 11\n      }, this), survey.question_type === QuestionType.RATING && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: survey.options && survey.options.length > 0 ?\n        /*#__PURE__*/\n        // Nuova modalità: voto per ogni opzione\n        _jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              marginBottom: '1.5rem',\n              fontSize: '1.125rem',\n              fontWeight: '600',\n              color: '#0f172a'\n            },\n            children: [\"Valuta ogni opzione da \", survey.min_value, \" a \", survey.max_value, \":\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 679,\n            columnNumber: 17\n          }, this), survey.options.map(option => /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: '2rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: 'block',\n                marginBottom: '0.75rem',\n                fontSize: '1rem',\n                fontWeight: '500',\n                color: '#334155'\n              },\n              children: option.option_text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 689,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(RatingInput, {\n              value: optionVotes.get(option.id) || null,\n              onChange: value => {\n                const newVotes = new Map(optionVotes);\n                if (value) {\n                  newVotes.set(option.id, value);\n                } else {\n                  newVotes.delete(option.id);\n                }\n                setOptionVotes(newVotes);\n              },\n              max: survey.max_value || 5,\n              icon: survey.rating_icon\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 698,\n              columnNumber: 21\n            }, this)]\n          }, option.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 688,\n            columnNumber: 19\n          }, this)), survey.allow_custom_options && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: '1rem'\n            },\n            children: !showCustomOption ? /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => {\n                setShowCustomOption(true);\n                // Inizializza il voto al valore minimo\n                setCustomOptionVote(survey.min_value || 1);\n              },\n              className: \"btn btn-secondary\",\n              style: {\n                width: '100%'\n              },\n              children: [/*#__PURE__*/_jsxDEV(PlusCircle, {\n                size: 18\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 729,\n                columnNumber: 25\n              }, this), \"Aggiungi un'Opzione da Valutare\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 719,\n              columnNumber: 23\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                padding: '1.5rem',\n                background: '#f8fafc',\n                borderRadius: '8px',\n                border: '2px dashed #6366f1'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  display: 'block',\n                  fontSize: '0.875rem',\n                  fontWeight: '500',\n                  color: '#475569',\n                  marginBottom: '0.5rem'\n                },\n                children: \"Nuova opzione da valutare:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 739,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: customOptionText,\n                onChange: e => setCustomOptionText(e.target.value),\n                placeholder: \"Inserisci l'opzione...\",\n                className: \"form-input\",\n                style: {\n                  margin: 0,\n                  marginBottom: '1rem'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 748,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  display: 'block',\n                  fontSize: '0.875rem',\n                  fontWeight: '500',\n                  color: '#475569',\n                  marginBottom: '0.75rem'\n                },\n                children: [\"Valuta questa opzione da \", survey.min_value, \" a \", survey.max_value, \":\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 757,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(RatingInput, {\n                value: customOptionVote,\n                onChange: setCustomOptionVote,\n                max: survey.max_value || 5,\n                icon: survey.rating_icon\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 766,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginTop: '1rem',\n                  display: 'flex',\n                  gap: '0.5rem'\n                },\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  onClick: () => {\n                    setShowCustomOption(false);\n                    setCustomOptionText('');\n                    setCustomOptionVote(null);\n                  },\n                  style: {\n                    fontSize: '0.8125rem',\n                    color: '#64748b',\n                    background: 'none',\n                    border: 'none',\n                    cursor: 'pointer',\n                    textDecoration: 'underline'\n                  },\n                  children: \"Annulla\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 774,\n                  columnNumber: 27\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 773,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 733,\n              columnNumber: 23\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 717,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 678,\n          columnNumber: 15\n        }, this) :\n        /*#__PURE__*/\n        // Backward compatibility: voto singolo\n        _jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              marginBottom: '1.5rem',\n              fontSize: '1.125rem',\n              fontWeight: '600',\n              color: '#0f172a'\n            },\n            children: [\"Valuta da \", survey.min_value, \" a \", survey.max_value, \":\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 801,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(RatingInput, {\n            value: ratingValue,\n            onChange: setRatingValue,\n            max: survey.max_value || 5,\n            icon: survey.rating_icon\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 809,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 800,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 675,\n        columnNumber: 11\n      }, this), survey.question_type === QuestionType.SCALE && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: survey.options && survey.options.length > 0 ?\n        /*#__PURE__*/\n        // Nuova modalità: voto per ogni opzione\n        _jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              marginBottom: '1.5rem',\n              fontSize: '1.125rem',\n              fontWeight: '600',\n              color: '#0f172a'\n            },\n            children: [\"Valuta ogni opzione da \", survey.min_value, \" a \", survey.max_value, \":\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 826,\n            columnNumber: 17\n          }, this), survey.options.map(option => /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: '2rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: 'block',\n                marginBottom: '0.75rem',\n                fontSize: '1rem',\n                fontWeight: '500',\n                color: '#334155'\n              },\n              children: option.option_text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 836,\n              columnNumber: 21\n            }, this), survey.scale_min_label && survey.scale_max_label && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                justifyContent: 'space-between',\n                marginBottom: '0.75rem',\n                fontSize: '0.875rem',\n                color: '#64748b'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: survey.scale_min_label\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 853,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: survey.scale_max_label\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 854,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 846,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"range\",\n              min: survey.min_value,\n              max: survey.max_value,\n              value: optionVotes.get(option.id) || survey.min_value,\n              onChange: e => {\n                const newVotes = new Map(optionVotes);\n                newVotes.set(option.id, parseFloat(e.target.value));\n                setOptionVotes(newVotes);\n              },\n              style: {\n                width: '100%',\n                height: '8px',\n                borderRadius: '4px',\n                appearance: 'none',\n                background: '#e2e8f0',\n                outline: 'none'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 857,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                textAlign: 'center',\n                marginTop: '1rem',\n                fontSize: '1.5rem',\n                fontWeight: '700',\n                color: '#6366f1'\n              },\n              children: optionVotes.get(option.id) || survey.min_value\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 876,\n              columnNumber: 21\n            }, this)]\n          }, option.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 835,\n            columnNumber: 19\n          }, this)), survey.allow_custom_options && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: '1rem'\n            },\n            children: !showCustomOption ? /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => {\n                setShowCustomOption(true);\n                // Inizializza lo slider al valore minimo\n                setCustomOptionVote(survey.min_value || 1);\n              },\n              className: \"btn btn-secondary\",\n              style: {\n                width: '100%'\n              },\n              children: [/*#__PURE__*/_jsxDEV(PlusCircle, {\n                size: 18\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 902,\n                columnNumber: 25\n              }, this), \"Aggiungi un'Opzione da Valutare\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 892,\n              columnNumber: 23\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                padding: '1.5rem',\n                background: '#f8fafc',\n                borderRadius: '8px',\n                border: '2px dashed #6366f1'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  display: 'block',\n                  fontSize: '0.875rem',\n                  fontWeight: '500',\n                  color: '#475569',\n                  marginBottom: '0.5rem'\n                },\n                children: \"Nuova opzione da valutare:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 912,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: customOptionText,\n                onChange: e => setCustomOptionText(e.target.value),\n                placeholder: \"Inserisci l'opzione...\",\n                className: \"form-input\",\n                style: {\n                  margin: 0,\n                  marginBottom: '1rem'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 921,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  display: 'block',\n                  fontSize: '0.875rem',\n                  fontWeight: '500',\n                  color: '#475569',\n                  marginBottom: '0.75rem'\n                },\n                children: [\"Valuta questa opzione da \", survey.min_value, \" a \", survey.max_value, \":\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 930,\n                columnNumber: 25\n              }, this), survey.scale_min_label && survey.scale_max_label && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  marginBottom: '0.75rem',\n                  fontSize: '0.875rem',\n                  color: '#64748b'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: survey.scale_min_label\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 947,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: survey.scale_max_label\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 948,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 940,\n                columnNumber: 27\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"range\",\n                min: survey.min_value,\n                max: survey.max_value,\n                value: customOptionVote || survey.min_value,\n                onChange: e => setCustomOptionVote(parseFloat(e.target.value)),\n                style: {\n                  width: '100%',\n                  height: '8px',\n                  borderRadius: '4px',\n                  appearance: 'none',\n                  background: '#e2e8f0',\n                  outline: 'none'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 951,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  textAlign: 'center',\n                  marginTop: '1rem',\n                  fontSize: '1.5rem',\n                  fontWeight: '700',\n                  color: '#6366f1'\n                },\n                children: customOptionVote || survey.min_value\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 966,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginTop: '1rem',\n                  display: 'flex',\n                  gap: '0.5rem'\n                },\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  onClick: () => {\n                    setShowCustomOption(false);\n                    setCustomOptionText('');\n                    setCustomOptionVote(null);\n                  },\n                  style: {\n                    fontSize: '0.8125rem',\n                    color: '#64748b',\n                    background: 'none',\n                    border: 'none',\n                    cursor: 'pointer',\n                    textDecoration: 'underline'\n                  },\n                  children: \"Annulla\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 977,\n                  columnNumber: 27\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 976,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 906,\n              columnNumber: 23\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 890,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 825,\n          columnNumber: 15\n        }, this) :\n        /*#__PURE__*/\n        // Backward compatibility: voto singolo\n        _jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              marginBottom: '1rem',\n              fontSize: '1.125rem',\n              fontWeight: '600',\n              color: '#0f172a'\n            },\n            children: [\"Seleziona un valore da \", survey.min_value, \" a \", survey.max_value, \":\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1004,\n            columnNumber: 17\n          }, this), survey.scale_min_label && survey.scale_max_label && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              justifyContent: 'space-between',\n              marginBottom: '0.75rem',\n              fontSize: '0.875rem',\n              color: '#64748b'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: survey.scale_min_label\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1020,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: survey.scale_max_label\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1021,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1013,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"range\",\n            min: survey.min_value,\n            max: survey.max_value,\n            value: numericValue || survey.min_value,\n            onChange: e => setNumericValue(e.target.value),\n            style: {\n              width: '100%',\n              height: '8px',\n              borderRadius: '4px',\n              appearance: 'none',\n              background: '#e2e8f0',\n              outline: 'none'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1024,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              textAlign: 'center',\n              marginTop: '1rem',\n              fontSize: '2rem',\n              fontWeight: '700',\n              color: '#6366f1'\n            },\n            children: numericValue || survey.min_value\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1039,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1003,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 822,\n        columnNumber: 11\n      }, this), survey.question_type === QuestionType.DATE && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: survey.options && survey.options.length > 0 ?\n        /*#__PURE__*/\n        // Nuova modalità: selezione tra date proposte\n        _jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              marginBottom: '1rem',\n              fontSize: '1.125rem',\n              fontWeight: '600',\n              color: '#0f172a',\n              display: 'flex',\n              alignItems: 'center',\n              gap: '0.375rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Calendar, {\n              size: 18,\n              style: {\n                color: '#6366f1'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1068,\n              columnNumber: 19\n            }, this), \"Seleziona una data disponibile:\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1059,\n            columnNumber: 17\n          }, this), survey.options.map((option, index) => {\n            const dateStr = option.option_text;\n            const isSelected = selectedOptions.includes(option.id);\n\n            // Formatta la data in italiano\n            let formattedDate = dateStr;\n            try {\n              const date = new Date(dateStr);\n              formattedDate = date.toLocaleDateString('it-IT', {\n                weekday: 'long',\n                year: 'numeric',\n                month: 'long',\n                day: 'numeric'\n              });\n            } catch (e) {\n              // Se non è una data valida, mostra il testo così com'è\n            }\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `option-item ${isSelected ? 'selected' : ''}`,\n              onClick: () => toggleOption(option.id),\n              style: {\n                animationDelay: `${index * 0.1}s`,\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.75rem'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                className: \"option-radio\",\n                name: \"survey-date-option\",\n                value: option.id,\n                checked: isSelected,\n                onChange: () => toggleOption(option.id)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1102,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  flex: 1\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"option-text\",\n                  children: formattedDate\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1111,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: '0.75rem',\n                    color: '#94a3b8',\n                    marginTop: '0.25rem'\n                  },\n                  children: dateStr\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1112,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1110,\n                columnNumber: 23\n              }, this), isSelected && /*#__PURE__*/_jsxDEV(CheckCircle2, {\n                size: 20,\n                style: {\n                  color: '#6366f1',\n                  marginLeft: 'auto'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1121,\n                columnNumber: 25\n              }, this)]\n            }, option.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1091,\n              columnNumber: 21\n            }, this);\n          }), survey.allow_custom_options && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: '1rem'\n            },\n            children: !showCustomOption ? /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => setShowCustomOption(true),\n              className: \"btn btn-secondary\",\n              style: {\n                width: '100%'\n              },\n              children: [/*#__PURE__*/_jsxDEV(PlusCircle, {\n                size: 18\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1143,\n                columnNumber: 25\n              }, this), \"Proponi una Nuova Data\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1137,\n              columnNumber: 23\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                padding: '1rem',\n                background: '#f8fafc',\n                borderRadius: '8px',\n                border: '2px dashed #6366f1'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  display: 'block',\n                  fontSize: '0.875rem',\n                  fontWeight: '500',\n                  color: '#475569',\n                  marginBottom: '0.5rem'\n                },\n                children: \"Proponi una data alternativa:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1153,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                value: dateValue,\n                onChange: e => {\n                  setDateValue(e.target.value);\n                  // Quando si inserisce una data personalizzata, deseleziona le opzioni\n                  setSelectedOptions([]);\n                },\n                className: \"form-input\",\n                style: {\n                  margin: 0,\n                  marginBottom: '0.5rem'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1162,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => {\n                  setShowCustomOption(false);\n                  setDateValue('');\n                },\n                style: {\n                  fontSize: '0.8125rem',\n                  color: '#64748b',\n                  background: 'none',\n                  border: 'none',\n                  cursor: 'pointer',\n                  textDecoration: 'underline'\n                },\n                children: \"Annulla\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1173,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1147,\n              columnNumber: 23\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1135,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1058,\n          columnNumber: 15\n        }, this) :\n        /*#__PURE__*/\n        // Backward compatibility: selezione libera\n        _jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              marginBottom: '1rem',\n              fontSize: '1.125rem',\n              fontWeight: '600',\n              color: '#0f172a'\n            },\n            children: \"Seleziona una data:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1198,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            value: dateValue,\n            onChange: e => setDateValue(e.target.value),\n            className: \"form-input\",\n            style: {\n              fontSize: '1.125rem'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1206,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1197,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1055,\n        columnNumber: 11\n      }, this), survey.question_type === QuestionType.OPEN_TEXT && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: survey.options && survey.options.length > 0 ?\n        /*#__PURE__*/\n        // Nuova modalità: risposta per ogni opzione\n        _jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              marginBottom: '1.5rem',\n              fontSize: '1.125rem',\n              fontWeight: '600',\n              color: '#0f172a'\n            },\n            children: \"Commenta su ogni opzione:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1224,\n            columnNumber: 17\n          }, this), survey.options.map(option => /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: '1.5rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: 'block',\n                marginBottom: '0.5rem',\n                fontSize: '1rem',\n                fontWeight: '500',\n                color: '#334155'\n              },\n              children: option.option_text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1234,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              value: optionResponses.get(option.id) || '',\n              onChange: e => {\n                const newResponses = new Map(optionResponses);\n                const value = e.target.value;\n                if (value) {\n                  newResponses.set(option.id, value);\n                } else {\n                  newResponses.delete(option.id);\n                }\n                setOptionResponses(newResponses);\n              },\n              className: \"form-textarea\",\n              placeholder: \"Inserisci un commento...\",\n              rows: 4\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1243,\n              columnNumber: 21\n            }, this)]\n          }, option.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1233,\n            columnNumber: 19\n          }, this)), survey.allow_custom_options && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: '1rem'\n            },\n            children: !showCustomOption ? /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => setShowCustomOption(true),\n              className: \"btn btn-secondary\",\n              style: {\n                width: '100%'\n              },\n              children: [/*#__PURE__*/_jsxDEV(PlusCircle, {\n                size: 18\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1272,\n                columnNumber: 25\n              }, this), \"Aggiungi un Nuovo Campo di Risposta\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1266,\n              columnNumber: 23\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                padding: '1.5rem',\n                background: '#f8fafc',\n                borderRadius: '8px',\n                border: '2px dashed #6366f1'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  display: 'block',\n                  fontSize: '0.875rem',\n                  fontWeight: '500',\n                  color: '#475569',\n                  marginBottom: '0.5rem'\n                },\n                children: \"Nuovo campo di risposta:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1282,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: customOptionText,\n                onChange: e => setCustomOptionText(e.target.value),\n                placeholder: \"Inserisci l'etichetta del campo...\",\n                className: \"form-input\",\n                style: {\n                  margin: 0,\n                  marginBottom: '1rem'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1291,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  display: 'block',\n                  fontSize: '0.875rem',\n                  fontWeight: '500',\n                  color: '#475569',\n                  marginBottom: '0.5rem'\n                },\n                children: \"La tua risposta:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1300,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                value: customOptionResponse,\n                onChange: e => setCustomOptionResponse(e.target.value),\n                className: \"form-textarea\",\n                placeholder: \"Inserisci la tua risposta...\",\n                rows: 4,\n                style: {\n                  margin: 0\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1309,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginTop: '1rem',\n                  display: 'flex',\n                  gap: '0.5rem'\n                },\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  onClick: () => {\n                    setShowCustomOption(false);\n                    setCustomOptionText('');\n                    setCustomOptionResponse('');\n                  },\n                  style: {\n                    fontSize: '0.8125rem',\n                    color: '#64748b',\n                    background: 'none',\n                    border: 'none',\n                    cursor: 'pointer',\n                    textDecoration: 'underline'\n                  },\n                  children: \"Annulla\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1319,\n                  columnNumber: 27\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1318,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1276,\n              columnNumber: 23\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1264,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1223,\n          columnNumber: 15\n        }, this) :\n        /*#__PURE__*/\n        // Backward compatibility: risposta singola\n        _jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              marginBottom: '1rem',\n              fontSize: '1.125rem',\n              fontWeight: '600',\n              color: '#0f172a'\n            },\n            children: \"Scrivi la tua risposta:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1346,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            value: textValue,\n            onChange: e => setTextValue(e.target.value),\n            className: \"form-textarea\",\n            placeholder: \"Inserisci qui la tua risposta...\",\n            rows: 6\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1354,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1345,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1220,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '2rem',\n          display: 'flex',\n          gap: '0.5rem',\n          paddingTop: '1.5rem',\n          borderTop: '1px solid #e2e8f0'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleVote,\n          className: \"btn btn-primary\",\n          disabled: voting,\n          style: {\n            flex: 1\n          },\n          children: [/*#__PURE__*/_jsxDEV(Vote, {\n            size: 18\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1380,\n            columnNumber: 13\n          }, this), voting ? 'Votando...' : 'Conferma Voto']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1374,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => navigate(`/survey/${survey.id}/results`),\n          className: \"btn btn-secondary\",\n          children: [/*#__PURE__*/_jsxDEV(BarChart2, {\n            size: 18\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1388,\n            columnNumber: 13\n          }, this), \"Vedi Risultati\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1384,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1367,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 466,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 455,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(SidebarLayout, {\n    sidebar: sidebar,\n    sidebarPosition: \"right\",\n    children: mainContent\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 1397,\n    columnNumber: 5\n  }, this);\n};\n_s(SurveyDetail, \"YbQ7y0Xwxm7TyWrAfLiK7itzyAo=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = SurveyDetail;\nexport default SurveyDetail;\nvar _c;\n$RefreshReg$(_c, \"SurveyDetail\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","ArrowLeft","Vote","BarChart2","CheckCircle2","Calendar","MessageSquare","PlusCircle","ThumbsUp","QuestionType","surveyApi","RatingInput","LikeRating","SidebarLayout","jsxDEV","_jsxDEV","SurveyDetail","_s","id","navigate","survey","setSurvey","selectedOptions","setSelectedOptions","ratingValue","setRatingValue","numericValue","setNumericValue","dateValue","setDateValue","textValue","setTextValue","customOptionText","setCustomOptionText","showCustomOption","setShowCustomOption","comment","setComment","optionVotes","setOptionVotes","Map","optionResponses","setOptionResponses","customOptionVote","setCustomOptionVote","customOptionResponse","setCustomOptionResponse","loading","setLoading","voting","setVoting","error","setError","success","setSuccess","userLike","setUserLike","likeRating","setLikeRating","likeSuccess","setLikeSuccess","loadSurvey","parseInt","surveyId","surveyData","getSurvey","existingLike","getUserLike","rating","err","console","toggleOption","optionId","question_type","SINGLE_CHOICE","DATE","MULTIPLE_CHOICE","includes","filter","handleVote","voteData","trim","custom_option_text","length","option_ids","RATING","SCALE","options","votes","option","value","get","undefined","push","option_id","numeric_value","option_votes","parseFloat","date_value","OPEN_TEXT","responses","response","response_text","option_responses","like_rating","survey_comment","voteSurvey","setTimeout","_err$response","status","data","detail","handleLikeChange","handleCommentChange","newComment","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","style","marginLeft","sidebar","display","alignItems","gap","marginBottom","paddingBottom","borderBottom","size","color","margin","fontSize","fontWeight","flex","background","borderRadius","padding","border","lineHeight","justifyContent","onChange","marginTop","textAlign","paddingTop","borderTop","require_comment","e","target","placeholder","rows","width","resize","fontFamily","fontStyle","mainContent","title","description","flexShrink","tags","flexWrap","map","tag","name","Date","created_at","toLocaleDateString","year","month","day","expires_at","hour","minute","index","animationDelay","type","checked","option_text","allow_custom_options","cursor","textDecoration","min_value","max_value","newVotes","set","delete","max","icon","rating_icon","scale_min_label","scale_max_label","min","height","appearance","outline","dateStr","isSelected","formattedDate","date","weekday","newResponses","disabled","sidebarPosition","_c","$RefreshReg$"],"sources":["/Users/alessandro.gandini/code/survey-app/frontend/src/pages/SurveyDetail.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { ArrowLeft, Vote, BarChart2, CheckCircle2, Calendar, MessageSquare, PlusCircle, ThumbsUp } from 'lucide-react';\nimport { Survey, QuestionType, VoteCreate, SurveyLike } from '../types';\nimport { surveyApi } from '../services/api';\nimport RatingInput from '../components/RatingInput';\nimport LikeRating from '../components/LikeRating';\nimport SidebarLayout from '../components/SidebarLayout';\n\nconst SurveyDetail: React.FC = () => {\n  const { id } = useParams<{ id: string }>();\n  const navigate = useNavigate();\n  const [survey, setSurvey] = useState<Survey | null>(null);\n  \n  // Stati per diversi tipi di voto\n  const [selectedOptions, setSelectedOptions] = useState<number[]>([]);\n  const [ratingValue, setRatingValue] = useState<number | null>(null);\n  const [numericValue, setNumericValue] = useState<string>('');\n  const [dateValue, setDateValue] = useState<string>('');\n  const [textValue, setTextValue] = useState<string>('');\n  const [customOptionText, setCustomOptionText] = useState<string>('');\n  const [showCustomOption, setShowCustomOption] = useState(false);\n  const [comment, setComment] = useState<string>('');\n  \n  // Stati per voti multipli per opzione (nuova funzionalità)\n  const [optionVotes, setOptionVotes] = useState<Map<number, number>>(new Map());\n  const [optionResponses, setOptionResponses] = useState<Map<number, string>>(new Map());\n  \n  // Stati per votare l'opzione personalizzata contestualmente\n  const [customOptionVote, setCustomOptionVote] = useState<number | null>(null);\n  const [customOptionResponse, setCustomOptionResponse] = useState<string>('');\n  \n  const [loading, setLoading] = useState(true);\n  const [voting, setVoting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [success, setSuccess] = useState<string | null>(null);\n  \n  // Stati per il gradimento\n  const [userLike, setUserLike] = useState<SurveyLike | null>(null);\n  const [likeRating, setLikeRating] = useState<number>(0);\n  const [likeSuccess, setLikeSuccess] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (id) {\n      loadSurvey(parseInt(id));\n    }\n  }, [id]);\n\n  const loadSurvey = async (surveyId: number) => {\n    try {\n      setLoading(true);\n      const surveyData = await surveyApi.getSurvey(surveyId);\n      setSurvey(surveyData);\n      \n      // Carica il gradimento e il commento dell'utente se esistono\n      const existingLike = await surveyApi.getUserLike(surveyId);\n      if (existingLike) {\n        setUserLike(existingLike);\n        setLikeRating(existingLike.rating);\n        if (existingLike.comment) {\n          setComment(existingLike.comment);\n        }\n      }\n      \n      setError(null);\n    } catch (err) {\n      setError('Errore nel caricamento del sondaggio');\n      console.error('Errore:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const toggleOption = (optionId: number) => {\n    if (!survey) return;\n\n    if (survey.question_type === QuestionType.SINGLE_CHOICE || survey.question_type === QuestionType.DATE) {\n      setSelectedOptions([optionId]);\n      // Quando si seleziona una data dalle opzioni, cancella la data personalizzata\n      if (survey.question_type === QuestionType.DATE) {\n        setDateValue('');\n      }\n    } else if (survey.question_type === QuestionType.MULTIPLE_CHOICE) {\n      if (selectedOptions.includes(optionId)) {\n        setSelectedOptions(selectedOptions.filter(id => id !== optionId));\n      } else {\n        setSelectedOptions([...selectedOptions, optionId]);\n      }\n    }\n  };\n\n  const handleVote = async () => {\n    if (!survey) return;\n\n    try {\n      setVoting(true);\n      setError(null);\n\n      const voteData: VoteCreate = {};\n\n      // Costruisci il voto in base al tipo\n      if (survey.question_type === QuestionType.SINGLE_CHOICE || \n          survey.question_type === QuestionType.MULTIPLE_CHOICE) {\n        \n        // Aggiungi custom option se presente\n        if (customOptionText.trim()) {\n          voteData.custom_option_text = customOptionText.trim();\n        }\n        \n        // Aggiungi opzioni selezionate se presenti\n        if (selectedOptions.length > 0) {\n          voteData.option_ids = selectedOptions;\n        }\n        \n        // Verifica che almeno una delle due sia presente\n        if (!voteData.custom_option_text && (!voteData.option_ids || voteData.option_ids.length === 0)) {\n          setError('Seleziona almeno un\\'opzione o inserisci una nuova');\n          setVoting(false);\n          return;\n        }\n      } else if (survey.question_type === QuestionType.RATING || \n                 survey.question_type === QuestionType.SCALE) {\n        \n        // Controlla se ci sono opzioni\n        if (survey.options && survey.options.length > 0) {\n          // Nuova modalità: voto per ogni opzione\n          const votes: { option_id: number; numeric_value?: number }[] = [];\n          \n          for (const option of survey.options) {\n            const value = optionVotes.get(option.id);\n            if (value !== undefined) {\n              votes.push({\n                option_id: option.id,\n                numeric_value: value\n              });\n            }\n          }\n          \n          // Aggiungi custom option se presente con il suo voto\n          if (customOptionText.trim()) {\n            if (!customOptionVote) {\n              setError('Devi valutare la nuova opzione proposta');\n              setVoting(false);\n              return;\n            }\n            voteData.custom_option_text = customOptionText.trim();\n            // Aggiungi il voto per l'opzione personalizzata come valore numerico generico\n            voteData.numeric_value = customOptionVote;\n          }\n          \n          if (votes.length === 0 && !voteData.custom_option_text) {\n            setError('Inserisci almeno una valutazione o aggiungi una nuova opzione');\n            setVoting(false);\n            return;\n          }\n          \n          if (votes.length > 0) {\n            voteData.option_votes = votes;\n          }\n        } else {\n          // Backward compatibility: voto singolo\n          if (survey.question_type === QuestionType.RATING) {\n            if (!ratingValue) {\n              setError('Seleziona una valutazione');\n              setVoting(false);\n              return;\n            }\n            voteData.numeric_value = ratingValue;\n          } else {\n            if (!numericValue) {\n              setError('Inserisci un valore numerico');\n              setVoting(false);\n              return;\n            }\n            voteData.numeric_value = parseFloat(numericValue);\n          }\n        }\n      } else if (survey.question_type === QuestionType.DATE) {\n        // Controlla se ci sono opzioni\n        if (survey.options && survey.options.length > 0) {\n          // Nuova modalità: selezione tra date proposte o data personalizzata\n          if (dateValue.trim()) {\n            // Data personalizzata\n            voteData.date_value = dateValue;\n          } else if (selectedOptions.length > 0) {\n            // Data selezionata dalle opzioni\n            voteData.option_ids = selectedOptions;\n          } else {\n            setError('Seleziona una data disponibile o proponi una nuova data');\n            setVoting(false);\n            return;\n          }\n        } else {\n          // Backward compatibility: selezione libera\n          if (!dateValue) {\n            setError('Seleziona una data');\n            setVoting(false);\n            return;\n          }\n          voteData.date_value = dateValue;\n        }\n      } else if (survey.question_type === QuestionType.OPEN_TEXT) {\n        // Controlla se ci sono opzioni\n        if (survey.options && survey.options.length > 0) {\n          // Nuova modalità: risposta per ogni opzione\n          const responses: { option_id: number; response_text: string }[] = [];\n          \n          for (const option of survey.options) {\n            const response = optionResponses.get(option.id);\n            if (response && response.trim()) {\n              responses.push({\n                option_id: option.id,\n                response_text: response.trim()\n              });\n            }\n          }\n          \n          // Aggiungi custom option se presente con la sua risposta\n          if (customOptionText.trim()) {\n            if (!customOptionResponse.trim()) {\n              setError('Devi inserire una risposta per il nuovo campo proposto');\n              setVoting(false);\n              return;\n            }\n            voteData.custom_option_text = customOptionText.trim();\n            // Aggiungi la risposta per l'opzione personalizzata come commento generico\n            voteData.comment = customOptionResponse.trim();\n          }\n          \n          if (responses.length === 0 && !voteData.custom_option_text) {\n            setError('Inserisci almeno una risposta o aggiungi un nuovo campo');\n            setVoting(false);\n            return;\n          }\n          \n          if (responses.length > 0) {\n            voteData.option_responses = responses;\n          }\n        } else {\n          // Backward compatibility: risposta singola\n          if (!textValue.trim()) {\n            setError('Inserisci una risposta');\n            setVoting(false);\n            return;\n          }\n          voteData.comment = textValue.trim();\n        }\n      }\n      \n      // Aggiungi gradimento e commento sul sondaggio se presenti\n      if (likeRating > 0) {\n        voteData.like_rating = likeRating;\n      }\n      if (comment && comment.trim()) {\n        voteData.survey_comment = comment.trim();\n      }\n      \n      await surveyApi.voteSurvey(survey.id, voteData);\n      setSuccess('Voto registrato con successo!');\n      \n      setTimeout(() => {\n        navigate(`/survey/${survey.id}/results`);\n      }, 2000);\n      \n    } catch (err: any) {\n      if (err.response?.status === 400) {\n        setError(err.response.data.detail || 'Errore nella registrazione del voto');\n      } else {\n        setError('Errore nella registrazione del voto');\n      }\n      console.error('Errore:', err);\n    } finally {\n      setVoting(false);\n    }\n  };\n\n  const handleLikeChange = (rating: number) => {\n    // Aggiorna solo lo stato locale, il gradimento verrà salvato insieme al voto\n    setLikeRating(rating);\n    setLikeSuccess(null);\n  };\n  \n  // Aggiorna solo lo stato locale del commento\n  const handleCommentChange = (newComment: string) => {\n    setComment(newComment);\n  };\n\n  if (loading) {\n    return <div className=\"loading\">Caricamento sondaggio...</div>;\n  }\n\n  if (error && !survey) {\n    return (\n      <div className=\"error\">\n        {error}\n        <button onClick={() => navigate('/surveys')} className=\"btn btn-primary\" style={{ marginLeft: '1rem' }}>\n          Torna alla Lista\n        </button>\n      </div>\n    );\n  }\n\n  if (!survey) {\n    return null;\n  }\n\n  // Pannello laterale con gradimento\n  const sidebar = (\n    <div>\n      <div style={{\n        display: 'flex',\n        alignItems: 'center',\n        gap: '0.5rem',\n        marginBottom: '1.5rem',\n        paddingBottom: '1rem',\n        borderBottom: '2px solid #e2e8f0'\n      }}>\n        <ThumbsUp size={20} style={{ color: '#10b981' }} />\n        <h3 style={{ \n          margin: 0, \n          fontSize: '1.125rem', \n          fontWeight: '600', \n          color: '#0f172a',\n          flex: 1\n        }}>\n          Gradimento\n        </h3>\n      </div>\n\n      <div style={{\n        background: '#f8fafc',\n        borderRadius: '8px',\n        padding: '1.5rem',\n        border: '1px solid #e2e8f0'\n      }}>\n        <p style={{\n          fontSize: '0.875rem',\n          color: '#64748b',\n          marginBottom: '1rem',\n          lineHeight: 1.6\n        }}>\n          Quanto ti è piaciuto questo sondaggio?\n        </p>\n\n        <div style={{\n          display: 'flex',\n          justifyContent: 'center',\n          padding: '1rem 0'\n        }}>\n          <LikeRating\n            value={likeRating}\n            onChange={handleLikeChange}\n            size={28}\n          />\n        </div>\n\n        {likeRating > 0 && (\n          <p style={{\n            marginTop: '1rem',\n            fontSize: '0.8125rem',\n            color: '#10b981',\n            textAlign: 'center',\n            fontWeight: '500'\n          }}>\n            ✓ Hai selezionato {likeRating} pallini verdi\n          </p>\n        )}\n      </div>\n\n      {/* Sezione Commento */}\n      <div style={{\n        marginTop: '1.5rem',\n        paddingTop: '1.5rem',\n        borderTop: '2px solid #e2e8f0'\n      }}>\n        <div style={{\n          display: 'flex',\n          alignItems: 'center',\n          gap: '0.5rem',\n          marginBottom: '1rem'\n        }}>\n          <MessageSquare size={20} style={{ color: '#6366f1' }} />\n          <h3 style={{ \n            margin: 0, \n            fontSize: '1.125rem', \n            fontWeight: '600', \n            color: '#0f172a'\n          }}>\n            Commento\n          </h3>\n        </div>\n\n        <div style={{\n          background: '#f8fafc',\n          borderRadius: '8px',\n          padding: '1.5rem',\n          border: '1px solid #e2e8f0'\n        }}>\n          <label style={{\n            display: 'block',\n            fontSize: '0.875rem',\n            fontWeight: '500',\n            color: '#64748b',\n            marginBottom: '0.75rem'\n          }}>\n            Aggiungi un commento al sondaggio {survey.require_comment && <span style={{ color: '#6366f1' }}>(suggerito)</span>}\n          </label>\n          <textarea\n            value={comment}\n            onChange={(e) => handleCommentChange(e.target.value)}\n            className=\"form-textarea\"\n            placeholder=\"Condividi la tua opinione su questo sondaggio...\"\n            rows={4}\n            style={{\n              width: '100%',\n              padding: '0.75rem',\n              fontSize: '0.875rem',\n              border: '1px solid #cbd5e1',\n              borderRadius: '6px',\n              resize: 'vertical',\n              fontFamily: 'inherit'\n            }}\n          />\n          <p style={{\n            marginTop: '0.75rem',\n            fontSize: '0.75rem',\n            color: '#64748b',\n            fontStyle: 'italic'\n          }}>\n            💡 Gradimento e commento verranno registrati insieme alla conferma del voto\n          </p>\n        </div>\n      </div>\n\n      <div style={{\n        marginTop: '1.5rem',\n        padding: '1rem',\n        background: '#fef3c7',\n        borderRadius: '8px',\n        border: '1px solid #fbbf24'\n      }}>\n        <p style={{\n          fontSize: '0.8125rem',\n          color: '#92400e',\n          margin: 0,\n          lineHeight: 1.5\n        }}>\n          💡 Il tuo gradimento aiuta a migliorare i sondaggi futuri!\n        </p>\n      </div>\n    </div>\n  );\n\n  const mainContent = (\n    <div>\n      <div style={{ marginBottom: '2rem' }}>\n        <button onClick={() => navigate('/surveys')} className=\"btn btn-secondary\">\n          <ArrowLeft size={18} />\n          Torna alla Lista\n        </button>\n      </div>\n\n      {error && <div className=\"error\">{error}</div>}\n      {success && <div className=\"success\">{success}</div>}\n\n      <div className=\"card\">\n        <div style={{ marginBottom: '2rem' }}>\n          <h1 className=\"card-title\">{survey.title}</h1>\n          \n          {survey.description && (\n            <div style={{\n              display: 'flex',\n              gap: '0.5rem',\n              alignItems: 'flex-start',\n              marginTop: '0.75rem',\n              padding: '0.875rem',\n              background: '#f8fafc',\n              borderRadius: '8px',\n              border: '1px solid #e2e8f0'\n            }}>\n              <MessageSquare size={16} style={{\n                color: '#6366f1',\n                flexShrink: 0,\n                marginTop: '0.125rem'\n              }} />\n              <p style={{\n                color: '#475569',\n                margin: 0,\n                lineHeight: 1.5,\n                fontSize: '0.9375rem',\n                fontWeight: '400'\n              }}>\n                {survey.description}\n              </p>\n            </div>\n          )}\n\n          {survey.tags && survey.tags.length > 0 && (\n            <div style={{\n              display: 'flex',\n              gap: '0.5rem',\n              flexWrap: 'wrap',\n              marginTop: '0.75rem'\n            }}>\n              {survey.tags.map(tag => (\n                <span\n                  key={tag.id}\n                  style={{\n                    padding: '0.25rem 0.75rem',\n                    borderRadius: '6px',\n                    background: tag.color,\n                    color: 'white',\n                    fontSize: '0.75rem',\n                    fontWeight: '500'\n                  }}\n                >\n                  {tag.name}\n                </span>\n              ))}\n            </div>\n          )}\n\n          <div style={{\n            display: 'flex',\n            alignItems: 'center',\n            gap: '0.375rem',\n            marginTop: '0.75rem',\n            color: '#94a3b8',\n            fontSize: '0.8125rem'\n          }}>\n            <Calendar size={14} />\n            <span>\n              Creato il: {new Date(survey.created_at).toLocaleDateString('it-IT', {\n                year: 'numeric',\n                month: 'long',\n                day: 'numeric'\n              })}\n            </span>\n          </div>\n\n          {survey.expires_at && (\n            <div style={{\n              marginTop: '0.5rem',\n              padding: '0.5rem 0.75rem',\n              background: '#fef3c7',\n              border: '1px solid #fbbf24',\n              borderRadius: '6px',\n              color: '#92400e',\n              fontSize: '0.8125rem',\n              fontWeight: '500'\n            }}>\n              ⏰ Scadenza: {new Date(survey.expires_at).toLocaleDateString('it-IT', {\n                year: 'numeric',\n                month: 'long',\n                day: 'numeric',\n                hour: '2-digit',\n                minute: '2-digit'\n              })}\n            </div>\n          )}\n        </div>\n\n        {/* Single/Multiple Choice */}\n        {(survey.question_type === QuestionType.SINGLE_CHOICE || \n          survey.question_type === QuestionType.MULTIPLE_CHOICE) && (\n          <div>\n            <h3 style={{\n              marginBottom: '1rem',\n              fontSize: '1.125rem',\n              fontWeight: '600',\n              color: '#0f172a',\n              display: 'flex',\n              alignItems: 'center',\n              gap: '0.375rem'\n            }}>\n              <Vote size={18} style={{ color: '#6366f1' }} />\n              {survey.question_type === QuestionType.MULTIPLE_CHOICE \n                ? 'Seleziona una o più risposte:' \n                : 'Seleziona la tua risposta:'}\n            </h3>\n\n            {survey.options.map((option, index) => (\n              <div\n                key={option.id}\n                className={`option-item ${selectedOptions.includes(option.id) ? 'selected' : ''}`}\n                onClick={() => toggleOption(option.id)}\n                style={{\n                  animationDelay: `${index * 0.1}s`\n                }}\n              >\n                <input\n                  type={survey.question_type === QuestionType.MULTIPLE_CHOICE ? 'checkbox' : 'radio'}\n                  className=\"option-radio\"\n                  name=\"survey-option\"\n                  value={option.id}\n                  checked={selectedOptions.includes(option.id)}\n                  onChange={() => toggleOption(option.id)}\n                />\n                <span className=\"option-text\">{option.option_text}</span>\n                {selectedOptions.includes(option.id) && (\n                  <CheckCircle2\n                    size={20}\n                    style={{\n                      color: '#6366f1',\n                      marginLeft: 'auto'\n                    }}\n                  />\n                )}\n              </div>\n            ))}\n\n            {/* Custom Option */}\n            {survey.allow_custom_options && (\n              <div style={{ marginTop: '1rem' }}>\n                {!showCustomOption ? (\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowCustomOption(true)}\n                    className=\"btn btn-secondary\"\n                    style={{ width: '100%' }}\n                  >\n                    <PlusCircle size={18} />\n                    Aggiungi una Nuova Opzione\n                  </button>\n                ) : (\n                  <div style={{\n                    padding: '1rem',\n                    background: '#f8fafc',\n                    borderRadius: '8px',\n                    border: '2px dashed #6366f1'\n                  }}>\n                    <label style={{\n                      display: 'block',\n                      fontSize: '0.875rem',\n                      fontWeight: '500',\n                      color: '#475569',\n                      marginBottom: '0.5rem'\n                    }}>\n                      La tua opzione personalizzata:\n                    </label>\n                    <input\n                      type=\"text\"\n                      value={customOptionText}\n                      onChange={(e) => setCustomOptionText(e.target.value)}\n                      placeholder=\"Inserisci la tua opzione...\"\n                      className=\"form-input\"\n                      style={{ margin: 0, marginBottom: '0.5rem' }}\n                    />\n                    <button\n                      type=\"button\"\n                      onClick={() => {\n                        setShowCustomOption(false);\n                        setCustomOptionText('');\n                      }}\n                      style={{\n                        fontSize: '0.8125rem',\n                        color: '#64748b',\n                        background: 'none',\n                        border: 'none',\n                        cursor: 'pointer',\n                        textDecoration: 'underline'\n                      }}\n                    >\n                      Annulla\n                    </button>\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Rating */}\n        {survey.question_type === QuestionType.RATING && (\n          <div>\n            {survey.options && survey.options.length > 0 ? (\n              // Nuova modalità: voto per ogni opzione\n              <div>\n                <h3 style={{\n                  marginBottom: '1.5rem',\n                  fontSize: '1.125rem',\n                  fontWeight: '600',\n                  color: '#0f172a'\n                }}>\n                  Valuta ogni opzione da {survey.min_value} a {survey.max_value}:\n                </h3>\n                {survey.options.map((option) => (\n                  <div key={option.id} style={{ marginBottom: '2rem' }}>\n                    <label style={{\n                      display: 'block',\n                      marginBottom: '0.75rem',\n                      fontSize: '1rem',\n                      fontWeight: '500',\n                      color: '#334155'\n                    }}>\n                      {option.option_text}\n                    </label>\n                    <RatingInput\n                      value={optionVotes.get(option.id) || null}\n                      onChange={(value) => {\n                        const newVotes = new Map(optionVotes);\n                        if (value) {\n                          newVotes.set(option.id, value);\n                        } else {\n                          newVotes.delete(option.id);\n                        }\n                        setOptionVotes(newVotes);\n                      }}\n                      max={survey.max_value || 5}\n                      icon={survey.rating_icon}\n                    />\n                  </div>\n                ))}\n\n                {/* Custom Option for Rating */}\n                {survey.allow_custom_options && (\n                  <div style={{ marginTop: '1rem' }}>\n                    {!showCustomOption ? (\n                      <button\n                        type=\"button\"\n                        onClick={() => {\n                          setShowCustomOption(true);\n                          // Inizializza il voto al valore minimo\n                          setCustomOptionVote(survey.min_value || 1);\n                        }}\n                        className=\"btn btn-secondary\"\n                        style={{ width: '100%' }}\n                      >\n                        <PlusCircle size={18} />\n                        Aggiungi un'Opzione da Valutare\n                      </button>\n                    ) : (\n                      <div style={{\n                        padding: '1.5rem',\n                        background: '#f8fafc',\n                        borderRadius: '8px',\n                        border: '2px dashed #6366f1'\n                      }}>\n                        <label style={{\n                          display: 'block',\n                          fontSize: '0.875rem',\n                          fontWeight: '500',\n                          color: '#475569',\n                          marginBottom: '0.5rem'\n                        }}>\n                          Nuova opzione da valutare:\n                        </label>\n                        <input\n                          type=\"text\"\n                          value={customOptionText}\n                          onChange={(e) => setCustomOptionText(e.target.value)}\n                          placeholder=\"Inserisci l'opzione...\"\n                          className=\"form-input\"\n                          style={{ margin: 0, marginBottom: '1rem' }}\n                        />\n                        \n                        <label style={{\n                          display: 'block',\n                          fontSize: '0.875rem',\n                          fontWeight: '500',\n                          color: '#475569',\n                          marginBottom: '0.75rem'\n                        }}>\n                          Valuta questa opzione da {survey.min_value} a {survey.max_value}:\n                        </label>\n                        <RatingInput\n                          value={customOptionVote}\n                          onChange={setCustomOptionVote}\n                          max={survey.max_value || 5}\n                          icon={survey.rating_icon}\n                        />\n                        \n                        <div style={{ marginTop: '1rem', display: 'flex', gap: '0.5rem' }}>\n                          <button\n                            type=\"button\"\n                            onClick={() => {\n                              setShowCustomOption(false);\n                              setCustomOptionText('');\n                              setCustomOptionVote(null);\n                            }}\n                            style={{\n                              fontSize: '0.8125rem',\n                              color: '#64748b',\n                              background: 'none',\n                              border: 'none',\n                              cursor: 'pointer',\n                              textDecoration: 'underline'\n                            }}\n                          >\n                            Annulla\n                          </button>\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                )}\n              </div>\n            ) : (\n              // Backward compatibility: voto singolo\n              <div>\n                <h3 style={{\n                  marginBottom: '1.5rem',\n                  fontSize: '1.125rem',\n                  fontWeight: '600',\n                  color: '#0f172a'\n                }}>\n                  Valuta da {survey.min_value} a {survey.max_value}:\n                </h3>\n                <RatingInput\n                  value={ratingValue}\n                  onChange={setRatingValue}\n                  max={survey.max_value || 5}\n                  icon={survey.rating_icon}\n                />\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Scale */}\n        {survey.question_type === QuestionType.SCALE && (\n          <div>\n            {survey.options && survey.options.length > 0 ? (\n              // Nuova modalità: voto per ogni opzione\n              <div>\n                <h3 style={{\n                  marginBottom: '1.5rem',\n                  fontSize: '1.125rem',\n                  fontWeight: '600',\n                  color: '#0f172a'\n                }}>\n                  Valuta ogni opzione da {survey.min_value} a {survey.max_value}:\n                </h3>\n                {survey.options.map((option) => (\n                  <div key={option.id} style={{ marginBottom: '2rem' }}>\n                    <label style={{\n                      display: 'block',\n                      marginBottom: '0.75rem',\n                      fontSize: '1rem',\n                      fontWeight: '500',\n                      color: '#334155'\n                    }}>\n                      {option.option_text}\n                    </label>\n                    {survey.scale_min_label && survey.scale_max_label && (\n                      <div style={{\n                        display: 'flex',\n                        justifyContent: 'space-between',\n                        marginBottom: '0.75rem',\n                        fontSize: '0.875rem',\n                        color: '#64748b'\n                      }}>\n                        <span>{survey.scale_min_label}</span>\n                        <span>{survey.scale_max_label}</span>\n                      </div>\n                    )}\n                    <input\n                      type=\"range\"\n                      min={survey.min_value}\n                      max={survey.max_value}\n                      value={optionVotes.get(option.id) || survey.min_value}\n                      onChange={(e) => {\n                        const newVotes = new Map(optionVotes);\n                        newVotes.set(option.id, parseFloat(e.target.value));\n                        setOptionVotes(newVotes);\n                      }}\n                      style={{\n                        width: '100%',\n                        height: '8px',\n                        borderRadius: '4px',\n                        appearance: 'none',\n                        background: '#e2e8f0',\n                        outline: 'none'\n                      }}\n                    />\n                    <div style={{\n                      textAlign: 'center',\n                      marginTop: '1rem',\n                      fontSize: '1.5rem',\n                      fontWeight: '700',\n                      color: '#6366f1'\n                    }}>\n                      {optionVotes.get(option.id) || survey.min_value}\n                    </div>\n                  </div>\n                ))}\n\n                {/* Custom Option for Scale */}\n                {survey.allow_custom_options && (\n                  <div style={{ marginTop: '1rem' }}>\n                    {!showCustomOption ? (\n                      <button\n                        type=\"button\"\n                        onClick={() => {\n                          setShowCustomOption(true);\n                          // Inizializza lo slider al valore minimo\n                          setCustomOptionVote(survey.min_value || 1);\n                        }}\n                        className=\"btn btn-secondary\"\n                        style={{ width: '100%' }}\n                      >\n                        <PlusCircle size={18} />\n                        Aggiungi un'Opzione da Valutare\n                      </button>\n                    ) : (\n                      <div style={{\n                        padding: '1.5rem',\n                        background: '#f8fafc',\n                        borderRadius: '8px',\n                        border: '2px dashed #6366f1'\n                      }}>\n                        <label style={{\n                          display: 'block',\n                          fontSize: '0.875rem',\n                          fontWeight: '500',\n                          color: '#475569',\n                          marginBottom: '0.5rem'\n                        }}>\n                          Nuova opzione da valutare:\n                        </label>\n                        <input\n                          type=\"text\"\n                          value={customOptionText}\n                          onChange={(e) => setCustomOptionText(e.target.value)}\n                          placeholder=\"Inserisci l'opzione...\"\n                          className=\"form-input\"\n                          style={{ margin: 0, marginBottom: '1rem' }}\n                        />\n                        \n                        <label style={{\n                          display: 'block',\n                          fontSize: '0.875rem',\n                          fontWeight: '500',\n                          color: '#475569',\n                          marginBottom: '0.75rem'\n                        }}>\n                          Valuta questa opzione da {survey.min_value} a {survey.max_value}:\n                        </label>\n                        {survey.scale_min_label && survey.scale_max_label && (\n                          <div style={{\n                            display: 'flex',\n                            justifyContent: 'space-between',\n                            marginBottom: '0.75rem',\n                            fontSize: '0.875rem',\n                            color: '#64748b'\n                          }}>\n                            <span>{survey.scale_min_label}</span>\n                            <span>{survey.scale_max_label}</span>\n                          </div>\n                        )}\n                        <input\n                          type=\"range\"\n                          min={survey.min_value}\n                          max={survey.max_value}\n                          value={customOptionVote || survey.min_value}\n                          onChange={(e) => setCustomOptionVote(parseFloat(e.target.value))}\n                          style={{\n                            width: '100%',\n                            height: '8px',\n                            borderRadius: '4px',\n                            appearance: 'none',\n                            background: '#e2e8f0',\n                            outline: 'none'\n                          }}\n                        />\n                        <div style={{\n                          textAlign: 'center',\n                          marginTop: '1rem',\n                          fontSize: '1.5rem',\n                          fontWeight: '700',\n                          color: '#6366f1'\n                        }}>\n                          {customOptionVote || survey.min_value}\n                        </div>\n                        \n                        <div style={{ marginTop: '1rem', display: 'flex', gap: '0.5rem' }}>\n                          <button\n                            type=\"button\"\n                            onClick={() => {\n                              setShowCustomOption(false);\n                              setCustomOptionText('');\n                              setCustomOptionVote(null);\n                            }}\n                            style={{\n                              fontSize: '0.8125rem',\n                              color: '#64748b',\n                              background: 'none',\n                              border: 'none',\n                              cursor: 'pointer',\n                              textDecoration: 'underline'\n                            }}\n                          >\n                            Annulla\n                          </button>\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                )}\n              </div>\n            ) : (\n              // Backward compatibility: voto singolo\n              <div>\n                <h3 style={{\n                  marginBottom: '1rem',\n                  fontSize: '1.125rem',\n                  fontWeight: '600',\n                  color: '#0f172a'\n                }}>\n                  Seleziona un valore da {survey.min_value} a {survey.max_value}:\n                </h3>\n                {survey.scale_min_label && survey.scale_max_label && (\n                  <div style={{\n                    display: 'flex',\n                    justifyContent: 'space-between',\n                    marginBottom: '0.75rem',\n                    fontSize: '0.875rem',\n                    color: '#64748b'\n                  }}>\n                    <span>{survey.scale_min_label}</span>\n                    <span>{survey.scale_max_label}</span>\n                  </div>\n                )}\n                <input\n                  type=\"range\"\n                  min={survey.min_value}\n                  max={survey.max_value}\n                  value={numericValue || survey.min_value}\n                  onChange={(e) => setNumericValue(e.target.value)}\n                  style={{\n                    width: '100%',\n                    height: '8px',\n                    borderRadius: '4px',\n                    appearance: 'none',\n                    background: '#e2e8f0',\n                    outline: 'none'\n                  }}\n                />\n                <div style={{\n                  textAlign: 'center',\n                  marginTop: '1rem',\n                  fontSize: '2rem',\n                  fontWeight: '700',\n                  color: '#6366f1'\n                }}>\n                  {numericValue || survey.min_value}\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Date */}\n        {survey.question_type === QuestionType.DATE && (\n          <div>\n            {survey.options && survey.options.length > 0 ? (\n              // Nuova modalità: selezione tra date proposte\n              <div>\n                <h3 style={{\n                  marginBottom: '1rem',\n                  fontSize: '1.125rem',\n                  fontWeight: '600',\n                  color: '#0f172a',\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '0.375rem'\n                }}>\n                  <Calendar size={18} style={{ color: '#6366f1' }} />\n                  Seleziona una data disponibile:\n                </h3>\n\n                {survey.options.map((option, index) => {\n                  const dateStr = option.option_text;\n                  const isSelected = selectedOptions.includes(option.id);\n                  \n                  // Formatta la data in italiano\n                  let formattedDate = dateStr;\n                  try {\n                    const date = new Date(dateStr);\n                    formattedDate = date.toLocaleDateString('it-IT', {\n                      weekday: 'long',\n                      year: 'numeric',\n                      month: 'long',\n                      day: 'numeric'\n                    });\n                  } catch (e) {\n                    // Se non è una data valida, mostra il testo così com'è\n                  }\n\n                  return (\n                    <div\n                      key={option.id}\n                      className={`option-item ${isSelected ? 'selected' : ''}`}\n                      onClick={() => toggleOption(option.id)}\n                      style={{\n                        animationDelay: `${index * 0.1}s`,\n                        display: 'flex',\n                        alignItems: 'center',\n                        gap: '0.75rem'\n                      }}\n                    >\n                      <input\n                        type=\"radio\"\n                        className=\"option-radio\"\n                        name=\"survey-date-option\"\n                        value={option.id}\n                        checked={isSelected}\n                        onChange={() => toggleOption(option.id)}\n                      />\n                      <div style={{ flex: 1 }}>\n                        <div className=\"option-text\">{formattedDate}</div>\n                        <div style={{\n                          fontSize: '0.75rem',\n                          color: '#94a3b8',\n                          marginTop: '0.25rem'\n                        }}>\n                          {dateStr}\n                        </div>\n                      </div>\n                      {isSelected && (\n                        <CheckCircle2\n                          size={20}\n                          style={{\n                            color: '#6366f1',\n                            marginLeft: 'auto'\n                          }}\n                        />\n                      )}\n                    </div>\n                  );\n                })}\n\n                {/* Custom Date Option */}\n                {survey.allow_custom_options && (\n                  <div style={{ marginTop: '1rem' }}>\n                    {!showCustomOption ? (\n                      <button\n                        type=\"button\"\n                        onClick={() => setShowCustomOption(true)}\n                        className=\"btn btn-secondary\"\n                        style={{ width: '100%' }}\n                      >\n                        <PlusCircle size={18} />\n                        Proponi una Nuova Data\n                      </button>\n                    ) : (\n                      <div style={{\n                        padding: '1rem',\n                        background: '#f8fafc',\n                        borderRadius: '8px',\n                        border: '2px dashed #6366f1'\n                      }}>\n                        <label style={{\n                          display: 'block',\n                          fontSize: '0.875rem',\n                          fontWeight: '500',\n                          color: '#475569',\n                          marginBottom: '0.5rem'\n                        }}>\n                          Proponi una data alternativa:\n                        </label>\n                        <input\n                          type=\"date\"\n                          value={dateValue}\n                          onChange={(e) => {\n                            setDateValue(e.target.value);\n                            // Quando si inserisce una data personalizzata, deseleziona le opzioni\n                            setSelectedOptions([]);\n                          }}\n                          className=\"form-input\"\n                          style={{ margin: 0, marginBottom: '0.5rem' }}\n                        />\n                        <button\n                          type=\"button\"\n                          onClick={() => {\n                            setShowCustomOption(false);\n                            setDateValue('');\n                          }}\n                          style={{\n                            fontSize: '0.8125rem',\n                            color: '#64748b',\n                            background: 'none',\n                            border: 'none',\n                            cursor: 'pointer',\n                            textDecoration: 'underline'\n                          }}\n                        >\n                          Annulla\n                        </button>\n                      </div>\n                    )}\n                  </div>\n                )}\n              </div>\n            ) : (\n              // Backward compatibility: selezione libera\n              <div>\n                <h3 style={{\n                  marginBottom: '1rem',\n                  fontSize: '1.125rem',\n                  fontWeight: '600',\n                  color: '#0f172a'\n                }}>\n                  Seleziona una data:\n                </h3>\n                <input\n                  type=\"date\"\n                  value={dateValue}\n                  onChange={(e) => setDateValue(e.target.value)}\n                  className=\"form-input\"\n                  style={{ fontSize: '1.125rem' }}\n                />\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Open Text */}\n        {survey.question_type === QuestionType.OPEN_TEXT && (\n          <div>\n            {survey.options && survey.options.length > 0 ? (\n              // Nuova modalità: risposta per ogni opzione\n              <div>\n                <h3 style={{\n                  marginBottom: '1.5rem',\n                  fontSize: '1.125rem',\n                  fontWeight: '600',\n                  color: '#0f172a'\n                }}>\n                  Commenta su ogni opzione:\n                </h3>\n                {survey.options.map((option) => (\n                  <div key={option.id} style={{ marginBottom: '1.5rem' }}>\n                    <label style={{\n                      display: 'block',\n                      marginBottom: '0.5rem',\n                      fontSize: '1rem',\n                      fontWeight: '500',\n                      color: '#334155'\n                    }}>\n                      {option.option_text}\n                    </label>\n                    <textarea\n                      value={optionResponses.get(option.id) || ''}\n                      onChange={(e) => {\n                        const newResponses = new Map(optionResponses);\n                        const value = e.target.value;\n                        if (value) {\n                          newResponses.set(option.id, value);\n                        } else {\n                          newResponses.delete(option.id);\n                        }\n                        setOptionResponses(newResponses);\n                      }}\n                      className=\"form-textarea\"\n                      placeholder=\"Inserisci un commento...\"\n                      rows={4}\n                    />\n                  </div>\n                ))}\n\n                {/* Custom Option for Open Text */}\n                {survey.allow_custom_options && (\n                  <div style={{ marginTop: '1rem' }}>\n                    {!showCustomOption ? (\n                      <button\n                        type=\"button\"\n                        onClick={() => setShowCustomOption(true)}\n                        className=\"btn btn-secondary\"\n                        style={{ width: '100%' }}\n                      >\n                        <PlusCircle size={18} />\n                        Aggiungi un Nuovo Campo di Risposta\n                      </button>\n                    ) : (\n                      <div style={{\n                        padding: '1.5rem',\n                        background: '#f8fafc',\n                        borderRadius: '8px',\n                        border: '2px dashed #6366f1'\n                      }}>\n                        <label style={{\n                          display: 'block',\n                          fontSize: '0.875rem',\n                          fontWeight: '500',\n                          color: '#475569',\n                          marginBottom: '0.5rem'\n                        }}>\n                          Nuovo campo di risposta:\n                        </label>\n                        <input\n                          type=\"text\"\n                          value={customOptionText}\n                          onChange={(e) => setCustomOptionText(e.target.value)}\n                          placeholder=\"Inserisci l'etichetta del campo...\"\n                          className=\"form-input\"\n                          style={{ margin: 0, marginBottom: '1rem' }}\n                        />\n                        \n                        <label style={{\n                          display: 'block',\n                          fontSize: '0.875rem',\n                          fontWeight: '500',\n                          color: '#475569',\n                          marginBottom: '0.5rem'\n                        }}>\n                          La tua risposta:\n                        </label>\n                        <textarea\n                          value={customOptionResponse}\n                          onChange={(e) => setCustomOptionResponse(e.target.value)}\n                          className=\"form-textarea\"\n                          placeholder=\"Inserisci la tua risposta...\"\n                          rows={4}\n                          style={{ margin: 0 }}\n                        />\n                        \n                        <div style={{ marginTop: '1rem', display: 'flex', gap: '0.5rem' }}>\n                          <button\n                            type=\"button\"\n                            onClick={() => {\n                              setShowCustomOption(false);\n                              setCustomOptionText('');\n                              setCustomOptionResponse('');\n                            }}\n                            style={{\n                              fontSize: '0.8125rem',\n                              color: '#64748b',\n                              background: 'none',\n                              border: 'none',\n                              cursor: 'pointer',\n                              textDecoration: 'underline'\n                            }}\n                          >\n                            Annulla\n                          </button>\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                )}\n              </div>\n            ) : (\n              // Backward compatibility: risposta singola\n              <div>\n                <h3 style={{\n                  marginBottom: '1rem',\n                  fontSize: '1.125rem',\n                  fontWeight: '600',\n                  color: '#0f172a'\n                }}>\n                  Scrivi la tua risposta:\n                </h3>\n                <textarea\n                  value={textValue}\n                  onChange={(e) => setTextValue(e.target.value)}\n                  className=\"form-textarea\"\n                  placeholder=\"Inserisci qui la tua risposta...\"\n                  rows={6}\n                />\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Pulsanti */}\n        <div style={{\n          marginTop: '2rem',\n          display: 'flex',\n          gap: '0.5rem',\n          paddingTop: '1.5rem',\n          borderTop: '1px solid #e2e8f0'\n        }}>\n          <button\n            onClick={handleVote}\n            className=\"btn btn-primary\"\n            disabled={voting}\n            style={{ flex: 1 }}\n          >\n            <Vote size={18} />\n            {voting ? 'Votando...' : 'Conferma Voto'}\n          </button>\n\n          <button\n            onClick={() => navigate(`/survey/${survey.id}/results`)}\n            className=\"btn btn-secondary\"\n          >\n            <BarChart2 size={18} />\n            Vedi Risultati\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n\n  return (\n    <SidebarLayout sidebar={sidebar} sidebarPosition=\"right\">\n      {mainContent}\n    </SidebarLayout>\n  );\n};\n\nexport default SurveyDetail;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}