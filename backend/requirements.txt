# ============================================================================
# Web Democracy - Python Dependencies
# ============================================================================
# Compatibile con TUTTE le modalità di deploy: Local, Hybrid, Databricks
#
# Modalità:
# - Local: PostgreSQL in Docker
# - Hybrid: Databricks Lakebase (PostgreSQL-compatible)
# - Databricks: Full Databricks Apps con OAuth
# ============================================================================

# FastAPI - Web framework
fastapi==0.115.4
uvicorn[standard]==0.32.1

# PostgreSQL driver - psycopg 3.x (compatibile con local e Lakebase)
# Lakebase usa PostgreSQL standard (porta 5432), quindi psycopg funziona perfettamente
psycopg[binary]==3.2.3
psycopg-pool==3.2.4

# psycopg2 per compatibilità SQLAlchemy su Databricks
psycopg2-binary==2.9.10

# SQLAlchemy - ORM
sqlalchemy==2.0.41

# Pydantic - Data validation
pydantic==2.12.3

# File upload support
python-multipart==0.0.12

# Environment variables loading (per .env.lakebase)
python-dotenv==1.0.1

# Geospatial dependencies for H3 map visualization
h3==4.1.0
shapely==2.0.6
pandas==2.2.3
numpy==1.26.4  # Must be < 2.0.0 for databricks-sql-connector compatibility

# ============================================================================
# Databricks-specific dependencies (solo per modalità Full Databricks)
# Installate solo quando serve per app.py
# ============================================================================
# Decommentare solo per deploy su Databricks Apps:
databricks-sdk>=0.73.0

# Databricks SQL Connector for SQL Warehouse queries (H3 geospatial map)
databricks-sql-connector>=3.4.0

# ============================================================================
# Note:
# - psycopg 3.x funziona sia con PostgreSQL locale che con Lakebase
# - python-dotenv è necessario per database.py (carica .env.lakebase)
# - databricks-sdk è pesante (~500MB), installare solo per Full Databricks
# ============================================================================
